{
  "$schema": "json-schema.org/draft-04/schema#",
  "definitions": {
    "line_core": {
      "type": "object",
      "properties": {
        "name": { "type": "string" },
        "folder": { "type": "string" }
      },
      "required": ["name"]
    },
    "plot_element": {
      "type": "object",
      "properties": {
        "opacity": { "type": "number" },
        "label": { "type": "string" },
        "color": { "type": "string" },
        "base_line": { "$ref": "#/definitions/line_core" }
      }
    },
    "y_properties": {
      "type": "object",
      "properties": {
        "ymin": { "type": "number" },
        "ymax": { "type": "number" },
        "ylog": { "type": "boolean" },
        "ylabel": { "type": "string" },
        "ymajors": { "type": "number" }
      }
    },
    "line": {
      "allOf": [
        {"$ref": "#/definitions/line_core"},
        {"$ref": "#/definitions/plot_element"},
        {"type": "object", "properties": { "linestyle": { "type": "string" } } }
      ]
    },
    "band": {
      "allOf": [
        {"$ref": "#/definitions/plot_element"},
        {"properties": {
          "data": {
            "type": "array",
            "items": {"$ref": "#/definitions/line_core"}
          }
        } }
      ],
      "required": ["data"]
    },
    "plot": {
      "allOf": [
        { "type": "object",
          "properties": {
            "title": { "type": "string" },
            "output_file": { "type": "string" },
            "lines": {
              "type": "array",
              "items": { "$ref": "#/definitions/line"}
            },
            "bands": {
              "type": "array",
              "items": { "$ref": "#/definitions/band"}
            },
            "xmin": { "type": "number" },
            "xmax": { "type": "number" },
            "xmajors": { "type": "number" },
            "xminors": { "type": "number" },
            "yminors": { "type": "number" },
            "xlog": { "type": "boolean" },
            "legend_outside": { "type": "boolean" },
            "xlabel": { "type": "string" },
            "ratio": { "$ref": "#/definitions/y_properties" }
          }
        },
        { "$ref": "#/definitions/y_properties" }
      ]
    }
  },
  "type": "object",
  "properties": {
    "plots": {
      "type": "array",
      "items": { "$ref": "#/definitions/plot"},
      "required": [ "1" ]
    },
    "smooth": {
      "type": "array",
      "description": "For each `line_core` in `data` it will create a smoothed version",
      "items": {
        "type": "object",
        "properties": {
          "window_size": { "type": "number" },
          "poly_order": { "type": "number" },
          "suffix": {
            "type": "string",
            "description": "Not supported yet. Default is `_smooth`."
          },
          "data": {
            "type": "array",
            "items": { "$ref": "#/definitions/line_core" }
          }
        },
        "additionalProperties": false
      }
    },
    "fits": {
      "type": "array",
      "description": "For each `line_core` in `data` it will create a fitted version",
      "items": {
        "type": "object",
        "properties": {
          "fit_degree": { "type": "number" },
          "print_fit_parameters": { "type": "boolean" },
          "suffix": {
            "type": "string",
            "description": "Not supported yet. Default is `_fit`."
          },
          "data": {
            "type": "array",
            "items": { "$ref": "#/definitions/line_core" }
          }
        },
        "additionalProperties": false
      }
    },
    "data_output": {
      "type": "string",
      "description": "Not supported yet. Default is `./plots`."
    }
  },
  "required": [ "plots" ],
  "additionalProperties": false
}
